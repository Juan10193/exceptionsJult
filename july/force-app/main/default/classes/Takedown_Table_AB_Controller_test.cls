@istest
public class Takedown_Table_AB_Controller_test {
    @istest
    static void initRecords(){
        EIV_Parameter__c parameters = new EIV_Parameter__c();
        parameters.name = 'fecha limite';
        parameters.EIV_tx_parameter__c = '01/12/2018';
        insert parameters;
        Takedown_Invoice__c createTakedownInvoice = Data_Factory_TakedownInvoice_Test.createTakedownInvoice('xml');
        Takedown_Table_AB_Controller_cls.initRecords(createTakedownInvoice.TKD_pd_Takedown_CP__c);
    }
    @istest
    static void saveFile(){
        EIV_Parameter__c parameters = new EIV_Parameter__c();
        parameters.name = 'fecha limite';
        parameters.EIV_tx_parameter__c = '01/12/2018';
        insert parameters;
        //Takedown_Invoice__c tkd_invoice = Data_Factory_TakedownInvoice_Test.createTakedownInvoice('.xml');
        Takedowns_Contingency_plan__c createTakedownInvoice = Data_Factory_TakedownInvoice_Test.createTakeDownEval();
        Id idColateral = Data_Factory_TakedownInvoice_Test.createCollaterals();
        Id idAccount = Data_Factory_TakedownInvoice_Test.createAccount();
        Id idAsset = Data_Factory_TakedownInvoice_Test.createAsset(idAccount, idColateral, createTakedownInvoice.Id);
        Id idAsset2 = Data_Factory_TakedownInvoice_Test.createAsset(idAccount, idColateral, createTakedownInvoice.Id);
        
        list<Asset> listActivo = [SELECT Name, TKD_tx_Model__c, SerialNumber, Description, TKD_tx_model_year__c, TKD_tx_brand__c, Status, TKD_ck_active__c, TKD_tx_Insurance_policy__c,
                TKD_tl_ec_policy__c, TKD_tx_Insurance_company__c, TKD_tx_inciso_insurance__c, TKD_tx_aseguradora__c, TKD_tx_annex_a_number__c, TKD_tx_quote_number__c,
                TKD_ls_annex_a_status__c, TKD_ls_ec_or_customer_supplier__c, TKD_nu_unit_availability_days__c, TKD_tx_supplier_name__c,
                TKD_ls_purchase_Status__c, TKD_ls_delivery_status__c, TKD_ca_welcome_kit_sent__c, TKD_ls_annex_b_status__c, TKD_dv_payment_amount__c, TKD_tx_payment_type__c, Quantity,
                TKD_tx_payment_order__c, TKD_dv_soft_cost__c, TKD_tx_payment_frecuency__c, TKD_dv_total_cost__c, TKD_rb_collateral__c, TKD_rb_takedown_Invoice__c FROM Asset];
        Takedown_Table_AB_Controller_cls.saveData(listActivo, idAccount, createTakedownInvoice.Id);
    }
    
    @isTest
    static void deleteAsset() {
        EIV_Parameter__c parameters = new EIV_Parameter__c();
        parameters.name = 'fecha limite';
        parameters.EIV_tx_parameter__c = '01/12/2018';
        insert parameters;
        Takedowns_Contingency_plan__c createTakedownInvoice = Data_Factory_TakedownInvoice_Test.createTakeDownEval();
        Id idColateral = Data_Factory_TakedownInvoice_Test.createCollaterals();
        Id idAccount = Data_Factory_TakedownInvoice_Test.createAccount();
        Id idAsset = Data_Factory_TakedownInvoice_Test.createAsset(idAccount, idColateral, createTakedownInvoice.Id);
        Id idAsset2 = Data_Factory_TakedownInvoice_Test.createAsset(idAccount, idColateral, createTakedownInvoice.Id);
        
        list<Asset> listActivo = [SELECT id FROM Asset LIMIT 1];
        Takedown_Table_AB_Controller_cls.deleteAsset(listActivo, createTakedownInvoice.Id);
    }
    
    @isTest
    static void getCatalogCollateral(){
        EIV_Parameter__c parameters = new EIV_Parameter__c();
        parameters.name = 'fecha limite';
        parameters.EIV_tx_parameter__c = '01/12/2018';
        insert parameters;
        Takedown_Invoice__c getcatalago = Data_Factory_TakedownInvoice_Test.createTakedownInvoice('xml');
        Takedown_Table_AB_Controller_cls.getCatalogCollateral();
        
    }
    
    @isTest 
    static void sendEvalWithoutFields() {
        EIV_Parameter__c parameters = new EIV_Parameter__c();
        parameters.name = 'fecha limite';
        parameters.EIV_tx_parameter__c = '01/12/2018';
        insert parameters;
        Takedowns_Contingency_plan__c createTakedownInvoice = Data_Factory_TakedownInvoice_Test.createTakeDownEval();
        
        Entity_CP__c enttityCP = new Entity_CP__c();
        enttityCP.Name = 'Test';
        enttityCP.CPI_tx_RFC_TIN__c = 'Example';
        enttityCP.EM_Party_ID__c = '1234568977';
        enttityCP.EM_Top_Parent_ID__c = '12345689746545';
        insert enttityCP;
        createTakedownInvoice.CPL_rb_Entity_Name_CP__c = enttityCP.id;
        update createTakedownInvoice;
        
        String asset ='[{"Name":"EQUIPO NUEVO PRUEBA 2","SerialNumber":"RD0638","Quantity":1,"Description":"Equipo nuevo de resonancia magnética, Pedimento: 20 80 3438 0000524 Fecha pedimento: 07-JAN-2020 Aduana: 800 COLOMBIA, NUEVO LEON","OwnerId":"0052C0000026V4gQAE","TKD_ck_active__c":true,"TKD_tx_brand__c":"GE","TKD_rb_Takedown_CP__c":"a2Y3p00000MtjSKEAZ","TKD_rb_collateral__c":"a2w1R0000005uptQAA","TKD_fm_collateral_description__c":"DIAGNOSTIC EQUIPMENTS","TKD_fm_collateral_type__c":"HEALTHCARE EQUIPMENT","TDK_tx_pediment__c":"20  80  3438  0000524","TKD_tx_Model__c":"SIGNA Creator 15T","TKD_tx_model_year__c":"2020","TDK_dv_Unit_cost__c":611257,"TKD_dv_total_cost__c":611257,"TKD_tx_openlegacy_created_by__c":"503001085","TKD_ca_welcome_kit_sent__c":true,"TKD_tx_OpenLegacy_modified_by__c":"503001085","TKD_ls_asset_type__c":"EquipoNuevoOtraMaquinaria","TKD_rb_takedown_Invoice__c":"a443p000000kNS7AAM","Id":"02i2C000003bVd3QAE","CreatedDate":"2020-06-01T15:48:36.000Z","CreatedById":"0052C0000026V4gQAE","LastModifiedDate":"2020-06-01T17:06:19.000Z","LastModifiedById":"0052C0000026V4gQAE","CurrencyIsoCode":"USD","TKD_rb_takedown_Invoice__r":{"TKD_txt_RFC__c":"GSM920409JL6","Name":"500117580","CreatedDate":"2020-03-23T23:30:00.000Z","Id":"a443p000000kNS7AAM"},"CreatedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"LastModifiedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"TKD_rb_Takedown_CP__r":{"Eval_top_parentname__c":"SALUD DIGNA, A.C.","Id":"a2Y3p00000MtjSKEAZ"}},{"Name":"EQUIPO NUEVO PRUEBA 3","SerialNumber":"RD0638","Quantity":1,"Description":"Equipo nuevo de resonancia magnética, Pedimento: 20 80 3438 0000524 Fecha pedimento: 07-JAN-2020 Aduana: 800 COLOMBIA, NUEVO LEON","OwnerId":"0052C0000026V4gQAE","TKD_ck_active__c":true,"TKD_tx_brand__c":"GE","TKD_rb_Takedown_CP__c":"a2Y3p00000MtjSKEAZ","TKD_rb_collateral__c":"a2w1R0000005uptQAA","TKD_fm_collateral_description__c":"DIAGNOSTIC EQUIPMENTS","TKD_fm_collateral_type__c":"HEALTHCARE EQUIPMENT","TDK_tx_pediment__c":"20  80  3438  0000524","TKD_tx_Model__c":"SIGNA Creator 15T","TKD_tx_model_year__c":"2020","TDK_dv_Unit_cost__c":611255,"TKD_dv_total_cost__c":611255,"TKD_tx_openlegacy_created_by__c":"503001085","TKD_ca_welcome_kit_sent__c":true,"TKD_tx_OpenLegacy_modified_by__c":"503001085","TKD_ls_asset_type__c":"EquipoNuevoOtraMaquinaria","TKD_rb_takedown_Invoice__c":"a443p000000kNS7AAM","Id":"02i2C000003bVmPQAU","CreatedDate":"2020-06-01T17:39:35.000Z","CreatedById":"0052C0000026V4gQAE","LastModifiedDate":"2020-06-01T18:34:51.000Z","LastModifiedById":"0052C0000026V4gQAE","CurrencyIsoCode":"USD","TKD_rb_takedown_Invoice__r":{"TKD_txt_RFC__c":"GSM920409JL6","Name":"500117580","CreatedDate":"2020-03-23T23:30:00.000Z","Id":"a443p000000kNS7AAM"},"CreatedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"LastModifiedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"TKD_rb_Takedown_CP__r":{"Eval_top_parentname__c":"SALUD DIGNA, A.C.","Id":"a2Y3p00000MtjSKEAZ"}},{"Name":"EQUIPO NUEVO PRUEBA 3","SerialNumber":"RD0638","Quantity":1,"Description":"Equipo nuevo de resonancia magnética, Pedimento: 20 80 3438 0000524 Fecha pedimento: 07-JAN-2020 Aduana: 800 COLOMBIA, NUEVO LEON","OwnerId":"0052C0000026V4gQAE","TKD_ck_active__c":true,"TKD_tx_brand__c":"GE","TKD_rb_Takedown_CP__c":"a2Y3p00000MtjSKEAZ","TKD_rb_collateral__c":"a2w1R0000005uptQAA","TKD_fm_collateral_description__c":"DIAGNOSTIC EQUIPMENTS","TKD_fm_collateral_type__c":"HEALTHCARE EQUIPMENT","TDK_tx_pediment__c":"20  80  3438  0000524","TKD_tx_Model__c":"SIGNA Creator 15T","TKD_tx_model_year__c":"2020","TDK_dv_Unit_cost__c":611255,"TKD_dv_total_cost__c":611255,"TKD_tx_openlegacy_created_by__c":"503001085","TKD_ca_welcome_kit_sent__c":true,"TKD_tx_OpenLegacy_modified_by__c":"503001085","TKD_ls_asset_type__c":"EquipoNuevoOtraMaquinaria","TKD_rb_takedown_Invoice__c":"a443p000000kNS7AAM","Id":"02i2C000003bVmUQAU","CreatedDate":"2020-06-01T17:41:38.000Z","CreatedById":"0052C0000026V4gQAE","LastModifiedDate":"2020-06-01T18:34:36.000Z","LastModifiedById":"0052C0000026V4gQAE","CurrencyIsoCode":"USD","TKD_rb_takedown_Invoice__r":{"TKD_txt_RFC__c":"GSM920409JL6","Name":"500117580","CreatedDate":"2020-03-23T23:30:00.000Z","Id":"a443p000000kNS7AAM"},"CreatedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"LastModifiedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"TKD_rb_Takedown_CP__r":{"Eval_top_parentname__c":"SALUD DIGNA, A.C.","Id":"a2Y3p00000MtjSKEAZ"}},{"Name":"EQUIPO NUEVO PRUEBA 3","SerialNumber":"RD0638","Quantity":1,"Description":"Equipo nuevo de resonancia magnética, Pedimento: 20 80 3438 0000524 Fecha pedimento: 07-JAN-2020 Aduana: 800 COLOMBIA, NUEVO LEON","OwnerId":"0052C0000026V4gQAE","TKD_ck_active__c":true,"TKD_tx_brand__c":"GE","TKD_rb_Takedown_CP__c":"a2Y3p00000MtjSKEAZ","TKD_rb_collateral__c":"a2w1R0000005uptQAA","TKD_fm_collateral_description__c":"DIAGNOSTIC EQUIPMENTS","TKD_fm_collateral_type__c":"HEALTHCARE EQUIPMENT","TDK_tx_pediment__c":"20  80  3438  0000524","TKD_tx_Model__c":"SIGNA Creator 15T","TKD_tx_model_year__c":"2020","TDK_dv_Unit_cost__c":611289,"TKD_dv_total_cost__c":611289,"TKD_tx_openlegacy_created_by__c":"503001085","TKD_ca_welcome_kit_sent__c":true,"TKD_tx_OpenLegacy_modified_by__c":"503001085","TKD_ls_asset_type__c":"EquipoNuevoOtraMaquinaria","TKD_rb_takedown_Invoice__c":"a443p000000kNS7AAM","Id":"02i2C000003bVo1QAE","CreatedDate":"2020-06-01T18:39:06.000Z","CreatedById":"0052C0000026V4gQAE","LastModifiedDate":"2020-06-01T18:39:06.000Z","LastModifiedById":"0052C0000026V4gQAE","CurrencyIsoCode":"USD","TKD_rb_takedown_Invoice__r":{"TKD_txt_RFC__c":"GSM920409JL6","Name":"500117580","CreatedDate":"2020-03-23T23:30:00.000Z","Id":"a443p000000kNS7AAM"},"CreatedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"LastModifiedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"TKD_rb_Takedown_CP__r":{"Eval_top_parentname__c":"SALUD DIGNA, A.C.","Id":"a2Y3p00000MtjSKEAZ"}},{"Name":"EQUIPO NUEVO PRUEBA 5","SerialNumber":"RD0638","Quantity":1,"Description":"Equipo nuevo de resonancia magnética, Pedimento: 20 80 3438 0000524 Fecha pedimento: 07-JAN-2020 Aduana: 800 COLOMBIA, NUEVO LEON","OwnerId":"0052C0000026V4gQAE","TKD_ck_active__c":true,"TKD_tx_brand__c":"GE","TKD_rb_Takedown_CP__c":"a2Y3p00000MtjSKEAZ","TKD_rb_collateral__c":"a2w1R0000005uptQAA","TKD_fm_collateral_description__c":"DIAGNOSTIC EQUIPMENTS","TKD_fm_collateral_type__c":"HEALTHCARE EQUIPMENT","TDK_tx_pediment__c":"20  80  3438  0000524","TKD_tx_Model__c":"SIGNA Creator 15T","TKD_tx_model_year__c":"2020","TDK_dv_Unit_cost__c":611289,"TKD_dv_total_cost__c":611289,"TKD_tx_openlegacy_created_by__c":"503001085","TKD_ca_welcome_kit_sent__c":true,"TKD_tx_OpenLegacy_modified_by__c":"503001085","TKD_ls_asset_type__c":"EquipoNuevoOtraMaquinaria","TKD_rb_takedown_Invoice__c":"a443p000000kNS7AAM","Id":"02i2C000003bVo6QAE","CreatedDate":"2020-06-01T18:39:23.000Z","CreatedById":"0052C0000026V4gQAE","LastModifiedDate":"2020-06-01T18:39:23.000Z","LastModifiedById":"0052C0000026V4gQAE","CurrencyIsoCode":"USD","TKD_rb_takedown_Invoice__r":{"TKD_txt_RFC__c":"GSM920409JL6","Name":"500117580","CreatedDate":"2020-03-23T23:30:00.000Z","Id":"a443p000000kNS7AAM"},"CreatedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"LastModifiedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"TKD_rb_Takedown_CP__r":{"Eval_top_parentname__c":"SALUD DIGNA, A.C.","Id":"a2Y3p00000MtjSKEAZ"}},{"Name":"EQUIPO NUEVO DE RESONANCIA MAGNÉTICA SIGNA CREATOR 15T","SerialNumber":"RD0638","Quantity":1,"Description":"Equipo nuevo de resonancia magnética, Pedimento: 20 80 3438 0000524 Fecha pedimento: 07-JAN-2020 Aduana: 800 COLOMBIA, NUEVO LEON","OwnerId":"0053600000Fnkg3AAB","TKD_ck_active__c":true,"TKD_tx_brand__c":"GE","TKD_rb_Takedown_CP__c":"a2Y3p00000MtjSKEAZ","TKD_rb_collateral__c":"a2w1R0000005uptQAA","TKD_fm_collateral_description__c":"DIAGNOSTIC EQUIPMENTS","TKD_fm_collateral_type__c":"HEALTHCARE EQUIPMENT","TKD_tx_asset_external_ID__c":"2242","TKD_tx_Concept_ID__c":"323","TDK_tx_pediment__c":"20  80  3438  0000524","TKD_tx_Model__c":"SIGNA Creator 15T","TKD_tx_model_year__c":"2020","TDK_dv_Unit_cost__c":311257,"TKD_dv_total_cost__c":211257,"TKD_tx_openlegacy_created_by__c":"503001085","TKD_ca_welcome_kit_sent__c":true,"TKD_tx_OpenLegacy_modified_by__c":"503001085","TKD_ls_asset_type__c":"EquipoNuevoOtraMaquinaria","TKD_rb_takedown_Invoice__c":"a443p000000kNS7AAM","Id":"02i3p00000AwFkgAAF","CreatedDate":"2020-03-24T02:04:14.000Z","CreatedById":"0053600000Fnkg3AAB","LastModifiedDate":"2020-06-02T15:56:14.000Z","LastModifiedById":"0052C0000026V4gQAE","CurrencyIsoCode":"USD","TKD_rb_takedown_Invoice__r":{"TKD_txt_RFC__c":"GSM920409JL6","Name":"500117580","CreatedDate":"2020-03-23T23:30:00.000Z","Id":"a443p000000kNS7AAM"},"CreatedBy":{"Name":"Ricardo Pozo Gutierrez","Id":"0053600000Fnkg3AAB"},"LastModifiedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"TKD_rb_Takedown_CP__r":{"Eval_top_parentname__c":"SALUD DIGNA, A.C.","Id":"a2Y3p00000MtjSKEAZ"}}]';
        Takedown_Table_AB_Controller_cls.sendEvalApprove(asset,createTakedownInvoice.Id);
    }
    
    @isTest
    static void sendEval() {
        EIV_Parameter__c parameters = new EIV_Parameter__c();
        parameters.name = 'fecha limite';
        parameters.EIV_tx_parameter__c = '01/12/2018';
        insert parameters;
        Takedowns_Contingency_plan__c createTakedownInvoice = Data_Factory_TakedownInvoice_Test.createTakeDownEval();
        
        String asset ='[{"Name":"EQUIPO NUEVO PRUEBA 2","SerialNumber":"RD0638","Quantity":1,"Description":"Equipo nuevo de resonancia magnética, Pedimento: 20 80 3438 0000524 Fecha pedimento: 07-JAN-2020 Aduana: 800 COLOMBIA, NUEVO LEON","OwnerId":"0052C0000026V4gQAE","TKD_ck_active__c":true,"TKD_tx_brand__c":"GE","TKD_rb_Takedown_CP__c":"a2Y3p00000MtjSKEAZ","TKD_rb_collateral__c":"a2w1R0000005uptQAA","TKD_fm_collateral_description__c":"DIAGNOSTIC EQUIPMENTS","TKD_fm_collateral_type__c":"HEALTHCARE EQUIPMENT","TDK_tx_pediment__c":"20  80  3438  0000524","TKD_tx_Model__c":"SIGNA Creator 15T","TKD_tx_model_year__c":"2020","TDK_dv_Unit_cost__c":611257,"TKD_dv_total_cost__c":611257,"TKD_tx_openlegacy_created_by__c":"503001085","TKD_ca_welcome_kit_sent__c":true,"TKD_tx_OpenLegacy_modified_by__c":"503001085","TKD_ls_asset_type__c":"EquipoNuevoOtraMaquinaria","TKD_rb_takedown_Invoice__c":"a443p000000kNS7AAM","Id":"02i2C000003bVd3QAE","CreatedDate":"2020-06-01T15:48:36.000Z","CreatedById":"0052C0000026V4gQAE","LastModifiedDate":"2020-06-01T17:06:19.000Z","LastModifiedById":"0052C0000026V4gQAE","CurrencyIsoCode":"USD","TKD_rb_takedown_Invoice__r":{"TKD_txt_RFC__c":"GSM920409JL6","Name":"500117580","CreatedDate":"2020-03-23T23:30:00.000Z","Id":"a443p000000kNS7AAM"},"CreatedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"LastModifiedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"TKD_rb_Takedown_CP__r":{"Eval_top_parentname__c":"SALUD DIGNA, A.C.","Id":"a2Y3p00000MtjSKEAZ"}},{"Name":"EQUIPO NUEVO PRUEBA 3","SerialNumber":"RD0638","Quantity":1,"Description":"Equipo nuevo de resonancia magnética, Pedimento: 20 80 3438 0000524 Fecha pedimento: 07-JAN-2020 Aduana: 800 COLOMBIA, NUEVO LEON","OwnerId":"0052C0000026V4gQAE","TKD_ck_active__c":true,"TKD_tx_brand__c":"GE","TKD_rb_Takedown_CP__c":"a2Y3p00000MtjSKEAZ","TKD_rb_collateral__c":"a2w1R0000005uptQAA","TKD_fm_collateral_description__c":"DIAGNOSTIC EQUIPMENTS","TKD_fm_collateral_type__c":"HEALTHCARE EQUIPMENT","TDK_tx_pediment__c":"20  80  3438  0000524","TKD_tx_Model__c":"SIGNA Creator 15T","TKD_tx_model_year__c":"2020","TDK_dv_Unit_cost__c":611255,"TKD_dv_total_cost__c":611255,"TKD_tx_openlegacy_created_by__c":"503001085","TKD_ca_welcome_kit_sent__c":true,"TKD_tx_OpenLegacy_modified_by__c":"503001085","TKD_ls_asset_type__c":"EquipoNuevoOtraMaquinaria","TKD_rb_takedown_Invoice__c":"a443p000000kNS7AAM","Id":"02i2C000003bVmPQAU","CreatedDate":"2020-06-01T17:39:35.000Z","CreatedById":"0052C0000026V4gQAE","LastModifiedDate":"2020-06-01T18:34:51.000Z","LastModifiedById":"0052C0000026V4gQAE","CurrencyIsoCode":"USD","TKD_rb_takedown_Invoice__r":{"TKD_txt_RFC__c":"GSM920409JL6","Name":"500117580","CreatedDate":"2020-03-23T23:30:00.000Z","Id":"a443p000000kNS7AAM"},"CreatedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"LastModifiedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"TKD_rb_Takedown_CP__r":{"Eval_top_parentname__c":"SALUD DIGNA, A.C.","Id":"a2Y3p00000MtjSKEAZ"}},{"Name":"EQUIPO NUEVO PRUEBA 3","SerialNumber":"RD0638","Quantity":1,"Description":"Equipo nuevo de resonancia magnética, Pedimento: 20 80 3438 0000524 Fecha pedimento: 07-JAN-2020 Aduana: 800 COLOMBIA, NUEVO LEON","OwnerId":"0052C0000026V4gQAE","TKD_ck_active__c":true,"TKD_tx_brand__c":"GE","TKD_rb_Takedown_CP__c":"a2Y3p00000MtjSKEAZ","TKD_rb_collateral__c":"a2w1R0000005uptQAA","TKD_fm_collateral_description__c":"DIAGNOSTIC EQUIPMENTS","TKD_fm_collateral_type__c":"HEALTHCARE EQUIPMENT","TDK_tx_pediment__c":"20  80  3438  0000524","TKD_tx_Model__c":"SIGNA Creator 15T","TKD_tx_model_year__c":"2020","TDK_dv_Unit_cost__c":611255,"TKD_dv_total_cost__c":611255,"TKD_tx_openlegacy_created_by__c":"503001085","TKD_ca_welcome_kit_sent__c":true,"TKD_tx_OpenLegacy_modified_by__c":"503001085","TKD_ls_asset_type__c":"EquipoNuevoOtraMaquinaria","TKD_rb_takedown_Invoice__c":"a443p000000kNS7AAM","Id":"02i2C000003bVmUQAU","CreatedDate":"2020-06-01T17:41:38.000Z","CreatedById":"0052C0000026V4gQAE","LastModifiedDate":"2020-06-01T18:34:36.000Z","LastModifiedById":"0052C0000026V4gQAE","CurrencyIsoCode":"USD","TKD_rb_takedown_Invoice__r":{"TKD_txt_RFC__c":"GSM920409JL6","Name":"500117580","CreatedDate":"2020-03-23T23:30:00.000Z","Id":"a443p000000kNS7AAM"},"CreatedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"LastModifiedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"TKD_rb_Takedown_CP__r":{"Eval_top_parentname__c":"SALUD DIGNA, A.C.","Id":"a2Y3p00000MtjSKEAZ"}},{"Name":"EQUIPO NUEVO PRUEBA 3","SerialNumber":"RD0638","Quantity":1,"Description":"Equipo nuevo de resonancia magnética, Pedimento: 20 80 3438 0000524 Fecha pedimento: 07-JAN-2020 Aduana: 800 COLOMBIA, NUEVO LEON","OwnerId":"0052C0000026V4gQAE","TKD_ck_active__c":true,"TKD_tx_brand__c":"GE","TKD_rb_Takedown_CP__c":"a2Y3p00000MtjSKEAZ","TKD_rb_collateral__c":"a2w1R0000005uptQAA","TKD_fm_collateral_description__c":"DIAGNOSTIC EQUIPMENTS","TKD_fm_collateral_type__c":"HEALTHCARE EQUIPMENT","TDK_tx_pediment__c":"20  80  3438  0000524","TKD_tx_Model__c":"SIGNA Creator 15T","TKD_tx_model_year__c":"2020","TDK_dv_Unit_cost__c":611289,"TKD_dv_total_cost__c":611289,"TKD_tx_openlegacy_created_by__c":"503001085","TKD_ca_welcome_kit_sent__c":true,"TKD_tx_OpenLegacy_modified_by__c":"503001085","TKD_ls_asset_type__c":"EquipoNuevoOtraMaquinaria","TKD_rb_takedown_Invoice__c":"a443p000000kNS7AAM","Id":"02i2C000003bVo1QAE","CreatedDate":"2020-06-01T18:39:06.000Z","CreatedById":"0052C0000026V4gQAE","LastModifiedDate":"2020-06-01T18:39:06.000Z","LastModifiedById":"0052C0000026V4gQAE","CurrencyIsoCode":"USD","TKD_rb_takedown_Invoice__r":{"TKD_txt_RFC__c":"GSM920409JL6","Name":"500117580","CreatedDate":"2020-03-23T23:30:00.000Z","Id":"a443p000000kNS7AAM"},"CreatedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"LastModifiedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"TKD_rb_Takedown_CP__r":{"Eval_top_parentname__c":"SALUD DIGNA, A.C.","Id":"a2Y3p00000MtjSKEAZ"}},{"Name":"EQUIPO NUEVO PRUEBA 5","SerialNumber":"RD0638","Quantity":1,"Description":"Equipo nuevo de resonancia magnética, Pedimento: 20 80 3438 0000524 Fecha pedimento: 07-JAN-2020 Aduana: 800 COLOMBIA, NUEVO LEON","OwnerId":"0052C0000026V4gQAE","TKD_ck_active__c":true,"TKD_tx_brand__c":"GE","TKD_rb_Takedown_CP__c":"a2Y3p00000MtjSKEAZ","TKD_rb_collateral__c":"a2w1R0000005uptQAA","TKD_fm_collateral_description__c":"DIAGNOSTIC EQUIPMENTS","TKD_fm_collateral_type__c":"HEALTHCARE EQUIPMENT","TDK_tx_pediment__c":"20  80  3438  0000524","TKD_tx_Model__c":"SIGNA Creator 15T","TKD_tx_model_year__c":"2020","TDK_dv_Unit_cost__c":611289,"TKD_dv_total_cost__c":611289,"TKD_tx_openlegacy_created_by__c":"503001085","TKD_ca_welcome_kit_sent__c":true,"TKD_tx_OpenLegacy_modified_by__c":"503001085","TKD_ls_asset_type__c":"EquipoNuevoOtraMaquinaria","TKD_rb_takedown_Invoice__c":"a443p000000kNS7AAM","Id":"02i2C000003bVo6QAE","CreatedDate":"2020-06-01T18:39:23.000Z","CreatedById":"0052C0000026V4gQAE","LastModifiedDate":"2020-06-01T18:39:23.000Z","LastModifiedById":"0052C0000026V4gQAE","CurrencyIsoCode":"USD","TKD_rb_takedown_Invoice__r":{"TKD_txt_RFC__c":"GSM920409JL6","Name":"500117580","CreatedDate":"2020-03-23T23:30:00.000Z","Id":"a443p000000kNS7AAM"},"CreatedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"LastModifiedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"TKD_rb_Takedown_CP__r":{"Eval_top_parentname__c":"SALUD DIGNA, A.C.","Id":"a2Y3p00000MtjSKEAZ"}},{"Name":"EQUIPO NUEVO DE RESONANCIA MAGNÉTICA SIGNA CREATOR 15T","SerialNumber":"RD0638","Quantity":1,"Description":"Equipo nuevo de resonancia magnética, Pedimento: 20 80 3438 0000524 Fecha pedimento: 07-JAN-2020 Aduana: 800 COLOMBIA, NUEVO LEON","OwnerId":"0053600000Fnkg3AAB","TKD_ck_active__c":true,"TKD_tx_brand__c":"GE","TKD_rb_Takedown_CP__c":"a2Y3p00000MtjSKEAZ","TKD_rb_collateral__c":"a2w1R0000005uptQAA","TKD_fm_collateral_description__c":"DIAGNOSTIC EQUIPMENTS","TKD_fm_collateral_type__c":"HEALTHCARE EQUIPMENT","TKD_tx_asset_external_ID__c":"2242","TKD_tx_Concept_ID__c":"323","TDK_tx_pediment__c":"20  80  3438  0000524","TKD_tx_Model__c":"SIGNA Creator 15T","TKD_tx_model_year__c":"2020","TDK_dv_Unit_cost__c":311257,"TKD_dv_total_cost__c":211257,"TKD_tx_openlegacy_created_by__c":"503001085","TKD_ca_welcome_kit_sent__c":true,"TKD_tx_OpenLegacy_modified_by__c":"503001085","TKD_ls_asset_type__c":"EquipoNuevoOtraMaquinaria","TKD_rb_takedown_Invoice__c":"a443p000000kNS7AAM","Id":"02i3p00000AwFkgAAF","CreatedDate":"2020-03-24T02:04:14.000Z","CreatedById":"0053600000Fnkg3AAB","LastModifiedDate":"2020-06-02T15:56:14.000Z","LastModifiedById":"0052C0000026V4gQAE","CurrencyIsoCode":"USD","TKD_rb_takedown_Invoice__r":{"TKD_txt_RFC__c":"GSM920409JL6","Name":"500117580","CreatedDate":"2020-03-23T23:30:00.000Z","Id":"a443p000000kNS7AAM"},"CreatedBy":{"Name":"Ricardo Pozo Gutierrez","Id":"0053600000Fnkg3AAB"},"LastModifiedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"TKD_rb_Takedown_CP__r":{"Eval_top_parentname__c":"SALUD DIGNA, A.C.","Id":"a2Y3p00000MtjSKEAZ"}}]';
        Takedown_Table_AB_Controller_cls.sendEvalApprove(asset,createTakedownInvoice.Id);
        
        String asset2 ='[{"Name":"EQUIPO NUEVO PRUEBA 2","SerialNumber":"RD0638","Quantity":1,"Description":"Equipo nuevo de resonancia magnética, Pedimento: 20 80 3438 0000524 Fecha pedimento: 07-JAN-2020 Aduana: 800 COLOMBIA, NUEVO LEON","OwnerId":"0052C0000026V4gQAE","TKD_ck_active__c":true,"TKD_tx_brand__c":"GE","TKD_rb_Takedown_CP__c":"a2Y3p00000MtjSKEAZ","TKD_rb_collateral__c":"a2w1R0000005uptQAA","TKD_fm_collateral_description__c":"DIAGNOSTIC EQUIPMENTS","TKD_fm_collateral_type__c":"HEALTHCARE EQUIPMENT","TDK_tx_pediment__c":"20  80  3438  0000524","TKD_tx_Model__c":"SIGNA Creator 15T","TKD_tx_model_year__c":"2020","TDK_dv_Unit_cost__c":611257,"TKD_dv_total_cost__c":611257,"TKD_tx_openlegacy_created_by__c":"503001085","TKD_ca_welcome_kit_sent__c":true,"TKD_tx_OpenLegacy_modified_by__c":"503001085","TKD_ls_asset_type__c":"EquipoNuevoOtraMaquinaria","TKD_rb_takedown_Invoice__c":"a443p000000kNS7AAM","Id":"02i2C000003bVd3QAE","CreatedDate":"2020-06-01T15:48:36.000Z","CreatedById":"0052C0000026V4gQAE","LastModifiedDate":"2020-06-01T17:06:19.000Z","LastModifiedById":"0052C0000026V4gQAE","CurrencyIsoCode":"USD","TKD_rb_takedown_Invoice__r":{"TKD_txt_RFC__c":"GSM920409JL6","Name":"500117580","CreatedDate":"2020-03-23T23:30:00.000Z","Id":"a443p000000kNS7AAM"},"CreatedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"LastModifiedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"TKD_rb_Takedown_CP__r":{"Eval_top_parentname__c":"SALUD DIGNA, A.C.","Id":"a2Y3p00000MtjSKEAZ"}},{"Name":"EQUIPO NUEVO PRUEBA 3","SerialNumber":"RD0638","Quantity":1,"Description":"Equipo nuevo de resonancia magnética, Pedimento: 20 80 3438 0000524 Fecha pedimento: 07-JAN-2020 Aduana: 800 COLOMBIA, NUEVO LEON","OwnerId":"0052C0000026V4gQAE","TKD_ck_active__c":true,"TKD_tx_brand__c":"GE","TKD_rb_Takedown_CP__c":"a2Y3p00000MtjSKEAZ","TKD_rb_collateral__c":"a2w1R0000005uptQAA","TKD_fm_collateral_description__c":"DIAGNOSTIC EQUIPMENTS","TKD_fm_collateral_type__c":"HEALTHCARE EQUIPMENT","TDK_tx_pediment__c":"20  80  3438  0000524","TKD_tx_Model__c":"SIGNA Creator 15T","TKD_tx_model_year__c":"2020","TDK_dv_Unit_cost__c":611255,"TKD_dv_total_cost__c":611255,"TKD_tx_openlegacy_created_by__c":"503001085","TKD_ca_welcome_kit_sent__c":true,"TKD_tx_OpenLegacy_modified_by__c":"503001085","TKD_ls_asset_type__c":"EquipoNuevoOtraMaquinaria","TKD_rb_takedown_Invoice__c":"a443p000000kNS7AAM","Id":"02i2C000003bVmPQAU","CreatedDate":"2020-06-01T17:39:35.000Z","CreatedById":"0052C0000026V4gQAE","LastModifiedDate":"2020-06-01T18:34:51.000Z","LastModifiedById":"0052C0000026V4gQAE","CurrencyIsoCode":"USD","TKD_rb_takedown_Invoice__r":{"TKD_txt_RFC__c":"GSM920409JL6","Name":"500117580","CreatedDate":"2020-03-23T23:30:00.000Z","Id":"a443p000000kNS7AAM"},"CreatedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"LastModifiedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"TKD_rb_Takedown_CP__r":{"Eval_top_parentname__c":"SALUD DIGNA, A.C.","Id":"a2Y3p00000MtjSKEAZ"}},{"Name":"EQUIPO NUEVO PRUEBA 3","SerialNumber":"RD0638","Quantity":1,"Description":"Equipo nuevo de resonancia magnética, Pedimento: 20 80 3438 0000524 Fecha pedimento: 07-JAN-2020 Aduana: 800 COLOMBIA, NUEVO LEON","OwnerId":"0052C0000026V4gQAE","TKD_ck_active__c":true,"TKD_tx_brand__c":"GE","TKD_rb_Takedown_CP__c":"a2Y3p00000MtjSKEAZ","TKD_rb_collateral__c":"a2w1R0000005uptQAA","TKD_fm_collateral_description__c":"DIAGNOSTIC EQUIPMENTS","TKD_fm_collateral_type__c":"HEALTHCARE EQUIPMENT","TDK_tx_pediment__c":"20  80  3438  0000524","TKD_tx_Model__c":"SIGNA Creator 15T","TKD_tx_model_year__c":"2020","TDK_dv_Unit_cost__c":611255,"TKD_dv_total_cost__c":611255,"TKD_tx_openlegacy_created_by__c":"503001085","TKD_ca_welcome_kit_sent__c":true,"TKD_tx_OpenLegacy_modified_by__c":"503001085","TKD_ls_asset_type__c":"EquipoNuevoOtraMaquinaria","TKD_rb_takedown_Invoice__c":"a443p000000kNS7AAM","Id":"02i2C000003bVmUQAU","CreatedDate":"2020-06-01T17:41:38.000Z","CreatedById":"0052C0000026V4gQAE","LastModifiedDate":"2020-06-01T18:34:36.000Z","LastModifiedById":"0052C0000026V4gQAE","CurrencyIsoCode":"USD","TKD_rb_takedown_Invoice__r":{"TKD_txt_RFC__c":"GSM920409JL6","Name":"500117580","CreatedDate":"2020-03-23T23:30:00.000Z","Id":"a443p000000kNS7AAM"},"CreatedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"LastModifiedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"TKD_rb_Takedown_CP__r":{"Eval_top_parentname__c":"SALUD DIGNA, A.C.","Id":"a2Y3p00000MtjSKEAZ"}},{"Name":"EQUIPO NUEVO PRUEBA 3","SerialNumber":"RD0638","Quantity":1,"Description":"Equipo nuevo de resonancia magnética, Pedimento: 20 80 3438 0000524 Fecha pedimento: 07-JAN-2020 Aduana: 800 COLOMBIA, NUEVO LEON","OwnerId":"0052C0000026V4gQAE","TKD_ck_active__c":true,"TKD_tx_brand__c":"GE","TKD_rb_Takedown_CP__c":"a2Y3p00000MtjSKEAZ","TKD_rb_collateral__c":"a2w1R0000005uptQAA","TKD_fm_collateral_description__c":"DIAGNOSTIC EQUIPMENTS","TKD_fm_collateral_type__c":"HEALTHCARE EQUIPMENT","TDK_tx_pediment__c":"20  80  3438  0000524","TKD_tx_Model__c":"SIGNA Creator 15T","TKD_tx_model_year__c":"2020","TDK_dv_Unit_cost__c":611289,"TKD_dv_total_cost__c":611289,"TKD_tx_openlegacy_created_by__c":"503001085","TKD_ca_welcome_kit_sent__c":true,"TKD_tx_OpenLegacy_modified_by__c":"503001085","TKD_ls_asset_type__c":"EquipoNuevoOtraMaquinaria","TKD_rb_takedown_Invoice__c":"a443p000000kNS7AAM","Id":"02i2C000003bVo1QAE","CreatedDate":"2020-06-01T18:39:06.000Z","CreatedById":"0052C0000026V4gQAE","LastModifiedDate":"2020-06-01T18:39:06.000Z","LastModifiedById":"0052C0000026V4gQAE","CurrencyIsoCode":"USD","TKD_rb_takedown_Invoice__r":{"TKD_txt_RFC__c":"GSM920409JL6","Name":"500117580","CreatedDate":"2020-03-23T23:30:00.000Z","Id":"a443p000000kNS7AAM"},"CreatedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"LastModifiedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"TKD_rb_Takedown_CP__r":{"Eval_top_parentname__c":"SALUD DIGNA, A.C.","Id":"a2Y3p00000MtjSKEAZ"}},{"Name":"EQUIPO NUEVO PRUEBA 5","SerialNumber":"RD0638","Quantity":1,"Description":"Equipo nuevo de resonancia magnética, Pedimento: 20 80 3438 0000524 Fecha pedimento: 07-JAN-2020 Aduana: 800 COLOMBIA, NUEVO LEON","OwnerId":"0052C0000026V4gQAE","TKD_ck_active__c":true,"TKD_tx_brand__c":"GE","TKD_rb_Takedown_CP__c":"a2Y3p00000MtjSKEAZ","TKD_rb_collateral__c":"a2w1R0000005uptQAA","TKD_fm_collateral_description__c":"DIAGNOSTIC EQUIPMENTS","TKD_fm_collateral_type__c":"HEALTHCARE EQUIPMENT","TDK_tx_pediment__c":"20  80  3438  0000524","TKD_tx_Model__c":"SIGNA Creator 15T","TKD_tx_model_year__c":"2020","TDK_dv_Unit_cost__c":611289,"TKD_dv_total_cost__c":611289,"TKD_tx_openlegacy_created_by__c":"503001085","TKD_ca_welcome_kit_sent__c":true,"TKD_tx_OpenLegacy_modified_by__c":"503001085","TKD_ls_asset_type__c":"EquipoNuevoOtraMaquinaria","TKD_rb_takedown_Invoice__c":"a443p000000kNS7AAM","Id":"02i2C000003bVo6QAE","CreatedDate":"2020-06-01T18:39:23.000Z","CreatedById":"0052C0000026V4gQAE","LastModifiedDate":"2020-06-01T18:39:23.000Z","LastModifiedById":"0052C0000026V4gQAE","CurrencyIsoCode":"USD","TKD_rb_takedown_Invoice__r":{"TKD_txt_RFC__c":"GSM920409JL6","Name":"500117580","CreatedDate":"2020-03-23T23:30:00.000Z","Id":"a443p000000kNS7AAM"},"CreatedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"LastModifiedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"TKD_rb_Takedown_CP__r":{"Eval_top_parentname__c":"SALUD DIGNA, A.C.","Id":"a2Y3p00000MtjSKEAZ"}},{"Name":"EQUIPO NUEVO DE RESONANCIA MAGNÉTICA SIGNA CREATOR 15T","SerialNumber":"RD0638","Quantity":1,"Description":"Equipo nuevo de resonancia magnética, Pedimento: 20 80 3438 0000524 Fecha pedimento: 07-JAN-2020 Aduana: 800 COLOMBIA, NUEVO LEON","OwnerId":"0053600000Fnkg3AAB","TKD_ck_active__c":true,"TKD_tx_brand__c":"GE","TKD_rb_Takedown_CP__c":"a2Y3p00000MtjSKEAZ","TKD_rb_collateral__c":"a2w1R0000005uptQAA","TKD_fm_collateral_description__c":"DIAGNOSTIC EQUIPMENTS","TKD_fm_collateral_type__c":"HEALTHCARE EQUIPMENT","TKD_tx_asset_external_ID__c":"2242","TKD_tx_Concept_ID__c":"323","TDK_tx_pediment__c":"20  80  3438  0000524","TKD_tx_Model__c":"SIGNA Creator 15T","TKD_tx_model_year__c":"2020","TDK_dv_Unit_cost__c":311257,"TKD_dv_total_cost__c":211257,"TKD_tx_openlegacy_created_by__c":"503001085","TKD_ca_welcome_kit_sent__c":true,"TKD_tx_OpenLegacy_modified_by__c":"503001085","TKD_ls_asset_type__c":"EquipoNuevoOtraMaquinaria","TKD_rb_takedown_Invoice__c":"a443p000000kNS7AAM","Id":"02i3p00000AwFkgAAF","CreatedDate":"2020-03-24T02:04:14.000Z","CreatedById":"0053600000Fnkg3AAB","LastModifiedDate":"2020-06-02T15:56:14.000Z","LastModifiedById":"0052C0000026V4gQAE","CurrencyIsoCode":"USD","TKD_rb_takedown_Invoice__r":{"TKD_txt_RFC__c":"GSM920409JL6","Name":"500117580","CreatedDate":"2020-03-23T23:30:00.000Z","Id":"a443p000000kNS7AAM"},"CreatedBy":{"Name":"Ricardo Pozo Gutierrez","Id":"0053600000Fnkg3AAB"},"LastModifiedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"TKD_rb_Takedown_CP__r":{"Eval_top_parentname__c":"SALUD DIGNA, A.C.","Id":"a2Y3p00000MtjSKEAZ"}}]';
        Takedown_Table_AB_Controller_cls.sendEvalApprove(asset2,createTakedownInvoice.Id);
    }
    
    @isTest
    static void testOrg(){
        Test.startTest();
        	String baseURL = URL.getSalesforceBaseUrl().getHost();
			String testPrefix = '--qa';
			Data_Connect_Eval.credentialValidation();  
        
        	testPrefix = '--qa';
			Data_Connect_Eval.credentialValidation();     
        Test.stopTest();
    }

    @isTest
    static void sendEvalValidation() {
        STring asset = '';
        
        EIV_Parameter__c parameters = new EIV_Parameter__c();
        parameters.name = 'fecha limite';
        parameters.EIV_tx_parameter__c = '01/12/2018';
        insert parameters;
        Takedowns_Contingency_plan__c createTakedownInvoice = Data_Factory_TakedownInvoice_Test.createTakeDownEval();
        
        //Empty
        asset = '[{}]';
        Takedown_Table_AB_Controller_cls.sendEvalApprove(asset,createTakedownInvoice.Id);
        
        //Name
        asset = '[{"Name":"","SerialNumber":"456","Quantity":1,"Description":"ANTICIPO DEL BIEN O SERVICIO","OwnerId":"0053600000FnkftAAB","TKD_ck_active__c":true,"TKD_tx_brand__c":"Brand","TKD_rb_Takedown_CP__c":"a2Y3p00000MtjKGEAZ","TKD_rb_collateral__c":"a2w1R0000005urfQAA","TKD_fm_collateral_description__c":"SUB STATIONS","TKD_fm_collateral_type__c":"POWER AND ENERGY","TKD_tx_asset_external_ID__c":"200","TKD_tx_Concept_ID__c":"77","TKD_tx_Model__c":"1","TKD_tx_model_year__c":"2020","TDK_dv_Unit_cost__c":11568.8,"TKD_dv_total_cost__c":11568.8,"TKD_tx_openlegacy_created_by__c":"503001083","TKD_ca_welcome_kit_sent__c":false,"TKD_tx_OpenLegacy_modified_by__c":"503001083","TKD_ls_asset_type__c":"EquipoNuevoOtraMaquinaria","TKD_rb_takedown_Invoice__c":"a443p000000kJm0AAE","Id":"02i3p00000AwF1HAAV","CreatedDate":"2020-03-12T16:15:33.000Z","CreatedById":"0053600000FnkftAAB","LastModifiedDate":"2020-06-04T20:54:49.000Z","LastModifiedById":"0052C0000026V4gQAE","CurrencyIsoCode":"USD","TKD_rb_takedown_Invoice__r":{"TKD_txt_RFC__c":"BDE060804H24","Name":"BDE060804H24FANT1030","CreatedDate":"2020-03-11T21:55:50.000Z","Id":"a443p000000kJm0AAE"},"CreatedBy":{"Name":"Daniel Martinez Martinez","Id":"0053600000FnkftAAB"},"LastModifiedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"TKD_rb_Takedown_CP__r":{"TD_fm_Party_Id__c":"29877","Eval_top_parentID__c":"00136000017ssiB","Eval_top_parentname__c":"EXTRUSIONES METALICAS, S.A. DE C.V.","Id":"a2Y3p00000MtjKGEAZ"}}]';
        Takedown_Table_AB_Controller_cls.sendEvalApprove(asset,createTakedownInvoice.Id);
        
        //Model
        asset = '[{"Name":"Prueba","SerialNumber":"456","Quantity":1,"Description":"ANTICIPO DEL BIEN O SERVICIO","OwnerId":"0053600000FnkftAAB","TKD_ck_active__c":true,"TKD_tx_brand__c":"Brand","TKD_rb_Takedown_CP__c":"a2Y3p00000MtjKGEAZ","TKD_rb_collateral__c":"a2w1R0000005urfQAA","TKD_fm_collateral_description__c":"SUB STATIONS","TKD_fm_collateral_type__c":"POWER AND ENERGY","TKD_tx_asset_external_ID__c":"200","TKD_tx_Concept_ID__c":"77","TKD_tx_Model__c":"","TKD_tx_model_year__c":"2020","TDK_dv_Unit_cost__c":11568.8,"TKD_dv_total_cost__c":11568.8,"TKD_tx_openlegacy_created_by__c":"503001083","TKD_ca_welcome_kit_sent__c":false,"TKD_tx_OpenLegacy_modified_by__c":"503001083","TKD_ls_asset_type__c":"EquipoNuevoOtraMaquinaria","TKD_rb_takedown_Invoice__c":"a443p000000kJm0AAE","Id":"02i3p00000AwF1HAAV","CreatedDate":"2020-03-12T16:15:33.000Z","CreatedById":"0053600000FnkftAAB","LastModifiedDate":"2020-06-04T20:54:49.000Z","LastModifiedById":"0052C0000026V4gQAE","CurrencyIsoCode":"USD","TKD_rb_takedown_Invoice__r":{"TKD_txt_RFC__c":"BDE060804H24","Name":"BDE060804H24FANT1030","CreatedDate":"2020-03-11T21:55:50.000Z","Id":"a443p000000kJm0AAE"},"CreatedBy":{"Name":"Daniel Martinez Martinez","Id":"0053600000FnkftAAB"},"LastModifiedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"TKD_rb_Takedown_CP__r":{"TD_fm_Party_Id__c":"29877","Eval_top_parentID__c":"00136000017ssiB","Eval_top_parentname__c":"EXTRUSIONES METALICAS, S.A. DE C.V.","Id":"a2Y3p00000MtjKGEAZ"}}]';
        Takedown_Table_AB_Controller_cls.sendEvalApprove(asset,createTakedownInvoice.Id);
        
        //Serial number
        asset = '[{"Name":"Prueba","SerialNumber":"","Quantity":1,"Description":"ANTICIPO DEL BIEN O SERVICIO","OwnerId":"0053600000FnkftAAB","TKD_ck_active__c":true,"TKD_tx_brand__c":"Brand","TKD_rb_Takedown_CP__c":"a2Y3p00000MtjKGEAZ","TKD_rb_collateral__c":"a2w1R0000005urfQAA","TKD_fm_collateral_description__c":"SUB STATIONS","TKD_fm_collateral_type__c":"POWER AND ENERGY","TKD_tx_asset_external_ID__c":"200","TKD_tx_Concept_ID__c":"77","TKD_tx_Model__c":"1","TKD_tx_model_year__c":"2020","TDK_dv_Unit_cost__c":11568.8,"TKD_dv_total_cost__c":11568.8,"TKD_tx_openlegacy_created_by__c":"503001083","TKD_ca_welcome_kit_sent__c":false,"TKD_tx_OpenLegacy_modified_by__c":"503001083","TKD_ls_asset_type__c":"EquipoNuevoOtraMaquinaria","TKD_rb_takedown_Invoice__c":"a443p000000kJm0AAE","Id":"02i3p00000AwF1HAAV","CreatedDate":"2020-03-12T16:15:33.000Z","CreatedById":"0053600000FnkftAAB","LastModifiedDate":"2020-06-04T20:54:49.000Z","LastModifiedById":"0052C0000026V4gQAE","CurrencyIsoCode":"USD","TKD_rb_takedown_Invoice__r":{"TKD_txt_RFC__c":"BDE060804H24","Name":"BDE060804H24FANT1030","CreatedDate":"2020-03-11T21:55:50.000Z","Id":"a443p000000kJm0AAE"},"CreatedBy":{"Name":"Daniel Martinez Martinez","Id":"0053600000FnkftAAB"},"LastModifiedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"TKD_rb_Takedown_CP__r":{"TD_fm_Party_Id__c":"29877","Eval_top_parentID__c":"00136000017ssiB","Eval_top_parentname__c":"EXTRUSIONES METALICAS, S.A. DE C.V.","Id":"a2Y3p00000MtjKGEAZ"}}]';
        Takedown_Table_AB_Controller_cls.sendEvalApprove(asset,createTakedownInvoice.Id);
        
        //Description
        asset = '[{"Name":"Prueba","SerialNumber":"456","Quantity":1,"Description":"","OwnerId":"0053600000FnkftAAB","TKD_ck_active__c":true,"TKD_tx_brand__c":"Brand","TKD_rb_Takedown_CP__c":"a2Y3p00000MtjKGEAZ","TKD_rb_collateral__c":"a2w1R0000005urfQAA","TKD_fm_collateral_description__c":"SUB STATIONS","TKD_fm_collateral_type__c":"POWER AND ENERGY","TKD_tx_asset_external_ID__c":"200","TKD_tx_Concept_ID__c":"77","TKD_tx_Model__c":"1","TKD_tx_model_year__c":"2020","TDK_dv_Unit_cost__c":11568.8,"TKD_dv_total_cost__c":11568.8,"TKD_tx_openlegacy_created_by__c":"503001083","TKD_ca_welcome_kit_sent__c":false,"TKD_tx_OpenLegacy_modified_by__c":"503001083","TKD_ls_asset_type__c":"EquipoNuevoOtraMaquinaria","TKD_rb_takedown_Invoice__c":"a443p000000kJm0AAE","Id":"02i3p00000AwF1HAAV","CreatedDate":"2020-03-12T16:15:33.000Z","CreatedById":"0053600000FnkftAAB","LastModifiedDate":"2020-06-04T20:54:49.000Z","LastModifiedById":"0052C0000026V4gQAE","CurrencyIsoCode":"USD","TKD_rb_takedown_Invoice__r":{"TKD_txt_RFC__c":"BDE060804H24","Name":"BDE060804H24FANT1030","CreatedDate":"2020-03-11T21:55:50.000Z","Id":"a443p000000kJm0AAE"},"CreatedBy":{"Name":"Daniel Martinez Martinez","Id":"0053600000FnkftAAB"},"LastModifiedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"TKD_rb_Takedown_CP__r":{"TD_fm_Party_Id__c":"29877","Eval_top_parentID__c":"00136000017ssiB","Eval_top_parentname__c":"EXTRUSIONES METALICAS, S.A. DE C.V.","Id":"a2Y3p00000MtjKGEAZ"}}]';
        Takedown_Table_AB_Controller_cls.sendEvalApprove(asset,createTakedownInvoice.Id);
        
        
        //Model Year
        asset = '[{"Name":"Prueba","SerialNumber":"456","Quantity":1,"Description":"ANTICIPO DEL BIEN O SERVICIO","OwnerId":"0053600000FnkftAAB","TKD_ck_active__c":true,"TKD_tx_brand__c":"Brand","TKD_rb_Takedown_CP__c":"a2Y3p00000MtjKGEAZ","TKD_rb_collateral__c":"a2w1R0000005urfQAA","TKD_fm_collateral_description__c":"SUB STATIONS","TKD_fm_collateral_type__c":"POWER AND ENERGY","TKD_tx_asset_external_ID__c":"200","TKD_tx_Concept_ID__c":"77","TKD_tx_Model__c":"1","TKD_tx_model_year__c":"","TDK_dv_Unit_cost__c":11568.8,"TKD_dv_total_cost__c":11568.8,"TKD_tx_openlegacy_created_by__c":"503001083","TKD_ca_welcome_kit_sent__c":false,"TKD_tx_OpenLegacy_modified_by__c":"503001083","TKD_ls_asset_type__c":"EquipoNuevoOtraMaquinaria","TKD_rb_takedown_Invoice__c":"a443p000000kJm0AAE","Id":"02i3p00000AwF1HAAV","CreatedDate":"2020-03-12T16:15:33.000Z","CreatedById":"0053600000FnkftAAB","LastModifiedDate":"2020-06-04T20:54:49.000Z","LastModifiedById":"0052C0000026V4gQAE","CurrencyIsoCode":"USD","TKD_rb_takedown_Invoice__r":{"TKD_txt_RFC__c":"BDE060804H24","Name":"BDE060804H24FANT1030","CreatedDate":"2020-03-11T21:55:50.000Z","Id":"a443p000000kJm0AAE"},"CreatedBy":{"Name":"Daniel Martinez Martinez","Id":"0053600000FnkftAAB"},"LastModifiedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"TKD_rb_Takedown_CP__r":{"TD_fm_Party_Id__c":"29877","Eval_top_parentID__c":"00136000017ssiB","Eval_top_parentname__c":"EXTRUSIONES METALICAS, S.A. DE C.V.","Id":"a2Y3p00000MtjKGEAZ"}}]';
        Takedown_Table_AB_Controller_cls.sendEvalApprove(asset,createTakedownInvoice.Id);
        
        //Brand
        asset = '[{"Name":"Prueba","SerialNumber":"456","Quantity":1,"Description":"ANTICIPO DEL BIEN O SERVICIO","OwnerId":"0053600000FnkftAAB","TKD_ck_active__c":true,"TKD_tx_brand__c":"","TKD_rb_Takedown_CP__c":"a2Y3p00000MtjKGEAZ","TKD_rb_collateral__c":"a2w1R0000005urfQAA","TKD_fm_collateral_description__c":"SUB STATIONS","TKD_fm_collateral_type__c":"POWER AND ENERGY","TKD_tx_asset_external_ID__c":"200","TKD_tx_Concept_ID__c":"77","TKD_tx_Model__c":"1","TKD_tx_model_year__c":"2020","TDK_dv_Unit_cost__c":11568.8,"TKD_dv_total_cost__c":11568.8,"TKD_tx_openlegacy_created_by__c":"503001083","TKD_ca_welcome_kit_sent__c":false,"TKD_tx_OpenLegacy_modified_by__c":"503001083","TKD_ls_asset_type__c":"EquipoNuevoOtraMaquinaria","TKD_rb_takedown_Invoice__c":"a443p000000kJm0AAE","Id":"02i3p00000AwF1HAAV","CreatedDate":"2020-03-12T16:15:33.000Z","CreatedById":"0053600000FnkftAAB","LastModifiedDate":"2020-06-04T20:54:49.000Z","LastModifiedById":"0052C0000026V4gQAE","CurrencyIsoCode":"USD","TKD_rb_takedown_Invoice__r":{"TKD_txt_RFC__c":"BDE060804H24","Name":"BDE060804H24FANT1030","CreatedDate":"2020-03-11T21:55:50.000Z","Id":"a443p000000kJm0AAE"},"CreatedBy":{"Name":"Daniel Martinez Martinez","Id":"0053600000FnkftAAB"},"LastModifiedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"TKD_rb_Takedown_CP__r":{"TD_fm_Party_Id__c":"29877","Eval_top_parentID__c":"00136000017ssiB","Eval_top_parentname__c":"EXTRUSIONES METALICAS, S.A. DE C.V.","Id":"a2Y3p00000MtjKGEAZ"}}]';
        Takedown_Table_AB_Controller_cls.sendEvalApprove(asset,createTakedownInvoice.Id);
        
        //Quantity
        asset = '[{"Name":"Prueba","SerialNumber":"456","Quantity":0,"Description":"ANTICIPO DEL BIEN O SERVICIO","OwnerId":"0053600000FnkftAAB","TKD_ck_active__c":true,"TKD_tx_brand__c":"Brand","TKD_rb_Takedown_CP__c":"a2Y3p00000MtjKGEAZ","TKD_rb_collateral__c":"a2w1R0000005urfQAA","TKD_fm_collateral_description__c":"SUB STATIONS","TKD_fm_collateral_type__c":"POWER AND ENERGY","TKD_tx_asset_external_ID__c":"200","TKD_tx_Concept_ID__c":"77","TKD_tx_Model__c":"1","TKD_tx_model_year__c":"2020","TDK_dv_Unit_cost__c":11568.8,"TKD_dv_total_cost__c":11568.8,"TKD_tx_openlegacy_created_by__c":"503001083","TKD_ca_welcome_kit_sent__c":false,"TKD_tx_OpenLegacy_modified_by__c":"503001083","TKD_ls_asset_type__c":"EquipoNuevoOtraMaquinaria","TKD_rb_takedown_Invoice__c":"a443p000000kJm0AAE","Id":"02i3p00000AwF1HAAV","CreatedDate":"2020-03-12T16:15:33.000Z","CreatedById":"0053600000FnkftAAB","LastModifiedDate":"2020-06-04T20:54:49.000Z","LastModifiedById":"0052C0000026V4gQAE","CurrencyIsoCode":"USD","TKD_rb_takedown_Invoice__r":{"TKD_txt_RFC__c":"BDE060804H24","Name":"BDE060804H24FANT1030","CreatedDate":"2020-03-11T21:55:50.000Z","Id":"a443p000000kJm0AAE"},"CreatedBy":{"Name":"Daniel Martinez Martinez","Id":"0053600000FnkftAAB"},"LastModifiedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"TKD_rb_Takedown_CP__r":{"TD_fm_Party_Id__c":"29877","Eval_top_parentID__c":"00136000017ssiB","Eval_top_parentname__c":"EXTRUSIONES METALICAS, S.A. DE C.V.","Id":"a2Y3p00000MtjKGEAZ"}}]';
        Takedown_Table_AB_Controller_cls.sendEvalApprove(asset,createTakedownInvoice.Id);
        
        //Unit Cost
        asset = '[{"Name":"Prueba","SerialNumber":"456","Quantity":1,"Description":"ANTICIPO DEL BIEN O SERVICIO","OwnerId":"0053600000FnkftAAB","TKD_ck_active__c":true,"TKD_tx_brand__c":"Brand","TKD_rb_Takedown_CP__c":"a2Y3p00000MtjKGEAZ","TKD_rb_collateral__c":"a2w1R0000005urfQAA","TKD_fm_collateral_description__c":"SUB STATIONS","TKD_fm_collateral_type__c":"POWER AND ENERGY","TKD_tx_asset_external_ID__c":"200","TKD_tx_Concept_ID__c":"77","TKD_tx_Model__c":"1","TKD_tx_model_year__c":"2020","TDK_dv_Unit_cost__c": 0.0,"TKD_dv_total_cost__c":0.0,"TKD_tx_openlegacy_created_by__c":"503001083","TKD_ca_welcome_kit_sent__c":false,"TKD_tx_OpenLegacy_modified_by__c":"503001083","TKD_ls_asset_type__c":"EquipoNuevoOtraMaquinaria","TKD_rb_takedown_Invoice__c":"a443p000000kJm0AAE","Id":"02i3p00000AwF1HAAV","CreatedDate":"2020-03-12T16:15:33.000Z","CreatedById":"0053600000FnkftAAB","LastModifiedDate":"2020-06-04T20:54:49.000Z","LastModifiedById":"0052C0000026V4gQAE","CurrencyIsoCode":"USD","TKD_rb_takedown_Invoice__r":{"TKD_txt_RFC__c":"BDE060804H24","Name":"BDE060804H24FANT1030","CreatedDate":"2020-03-11T21:55:50.000Z","Id":"a443p000000kJm0AAE"},"CreatedBy":{"Name":"Daniel Martinez Martinez","Id":"0053600000FnkftAAB"},"LastModifiedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"TKD_rb_Takedown_CP__r":{"TD_fm_Party_Id__c":"29877","Eval_top_parentID__c":"00136000017ssiB","Eval_top_parentname__c":"EXTRUSIONES METALICAS, S.A. DE C.V.","Id":"a2Y3p00000MtjKGEAZ"}}]';
        Takedown_Table_AB_Controller_cls.sendEvalApprove(asset,createTakedownInvoice.Id);
        
        //Currency
        asset = '[{"Name":"Prueba","SerialNumber":"456","Quantity":1,"Description":"ANTICIPO DEL BIEN O SERVICIO","OwnerId":"0053600000FnkftAAB","TKD_ck_active__c":true,"TKD_tx_brand__c":"Brand","TKD_rb_Takedown_CP__c":"a2Y3p00000MtjKGEAZ","TKD_rb_collateral__c":"a2w1R0000005urfQAA","TKD_fm_collateral_description__c":"SUB STATIONS","TKD_fm_collateral_type__c":"POWER AND ENERGY","TKD_tx_asset_external_ID__c":"200","TKD_tx_Concept_ID__c":"77","TKD_tx_Model__c":"1","TKD_tx_model_year__c":"2020","TDK_dv_Unit_cost__c":11568.8,"TKD_dv_total_cost__c":11568.8,"TKD_tx_openlegacy_created_by__c":"503001083","TKD_ca_welcome_kit_sent__c":false,"TKD_tx_OpenLegacy_modified_by__c":"503001083","TKD_ls_asset_type__c":"EquipoNuevoOtraMaquinaria","TKD_rb_takedown_Invoice__c":"a443p000000kJm0AAE","Id":"02i3p00000AwF1HAAV","CreatedDate":"2020-03-12T16:15:33.000Z","CreatedById":"0053600000FnkftAAB","LastModifiedDate":"2020-06-04T20:54:49.000Z","LastModifiedById":"0052C0000026V4gQAE","CurrencyIsoCode":"","TKD_rb_takedown_Invoice__r":{"TKD_txt_RFC__c":"BDE060804H24","Name":"BDE060804H24FANT1030","CreatedDate":"2020-03-11T21:55:50.000Z","Id":"a443p000000kJm0AAE"},"CreatedBy":{"Name":"Daniel Martinez Martinez","Id":"0053600000FnkftAAB"},"LastModifiedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"TKD_rb_Takedown_CP__r":{"TD_fm_Party_Id__c":"29877","Eval_top_parentID__c":"00136000017ssiB","Eval_top_parentname__c":"EXTRUSIONES METALICAS, S.A. DE C.V.","Id":"a2Y3p00000MtjKGEAZ"}}]';
        Takedown_Table_AB_Controller_cls.sendEvalApprove(asset,createTakedownInvoice.Id);
        
        //Collecteral Type
        asset = '[{"Name":"Prueba","SerialNumber":"456","Quantity":1,"Description":"ANTICIPO DEL BIEN O SERVICIO","OwnerId":"0053600000FnkftAAB","TKD_ck_active__c":true,"TKD_tx_brand__c":"Brand","TKD_rb_Takedown_CP__c":"a2Y3p00000MtjKGEAZ","TKD_rb_collateral__c":"a2w1R0000005urfQAA","TKD_fm_collateral_description__c":"SUB STATIONS","TKD_fm_collateral_type__c":"","TKD_tx_asset_external_ID__c":"200","TKD_tx_Concept_ID__c":"77","TKD_tx_Model__c":"1","TKD_tx_model_year__c":"2020","TDK_dv_Unit_cost__c":11568.8,"TKD_dv_total_cost__c":11568.8,"TKD_tx_openlegacy_created_by__c":"503001083","TKD_ca_welcome_kit_sent__c":false,"TKD_tx_OpenLegacy_modified_by__c":"503001083","TKD_ls_asset_type__c":"EquipoNuevoOtraMaquinaria","TKD_rb_takedown_Invoice__c":"a443p000000kJm0AAE","Id":"02i3p00000AwF1HAAV","CreatedDate":"2020-03-12T16:15:33.000Z","CreatedById":"0053600000FnkftAAB","LastModifiedDate":"2020-06-04T20:54:49.000Z","LastModifiedById":"0052C0000026V4gQAE","CurrencyIsoCode":"USD","TKD_rb_takedown_Invoice__r":{"TKD_txt_RFC__c":"BDE060804H24","Name":"BDE060804H24FANT1030","CreatedDate":"2020-03-11T21:55:50.000Z","Id":"a443p000000kJm0AAE"},"CreatedBy":{"Name":"Daniel Martinez Martinez","Id":"0053600000FnkftAAB"},"LastModifiedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"TKD_rb_Takedown_CP__r":{"TD_fm_Party_Id__c":"29877","Eval_top_parentID__c":"00136000017ssiB","Eval_top_parentname__c":"EXTRUSIONES METALICAS, S.A. DE C.V.","Id":"a2Y3p00000MtjKGEAZ"}}]';
        Takedown_Table_AB_Controller_cls.sendEvalApprove(asset,createTakedownInvoice.Id);
        
        //Collecteral Description
        asset = '[{"Name":"Prueba","SerialNumber":"456","Quantity":1,"Description":"ANTICIPO DEL BIEN O SERVICIO","OwnerId":"0053600000FnkftAAB","TKD_ck_active__c":true,"TKD_tx_brand__c":"Brand","TKD_rb_Takedown_CP__c":"a2Y3p00000MtjKGEAZ","TKD_rb_collateral__c":"a2w1R0000005urfQAA","TKD_fm_collateral_description__c":"","TKD_fm_collateral_type__c":"POWER AND ENERGY","TKD_tx_asset_external_ID__c":"200","TKD_tx_Concept_ID__c":"77","TKD_tx_Model__c":"1","TKD_tx_model_year__c":"2020","TDK_dv_Unit_cost__c":11568.8,"TKD_dv_total_cost__c":11568.8,"TKD_tx_openlegacy_created_by__c":"503001083","TKD_ca_welcome_kit_sent__c":false,"TKD_tx_OpenLegacy_modified_by__c":"503001083","TKD_ls_asset_type__c":"EquipoNuevoOtraMaquinaria","TKD_rb_takedown_Invoice__c":"a443p000000kJm0AAE","Id":"02i3p00000AwF1HAAV","CreatedDate":"2020-03-12T16:15:33.000Z","CreatedById":"0053600000FnkftAAB","LastModifiedDate":"2020-06-04T20:54:49.000Z","LastModifiedById":"0052C0000026V4gQAE","CurrencyIsoCode":"USD","TKD_rb_takedown_Invoice__r":{"TKD_txt_RFC__c":"BDE060804H24","Name":"BDE060804H24FANT1030","CreatedDate":"2020-03-11T21:55:50.000Z","Id":"a443p000000kJm0AAE"},"CreatedBy":{"Name":"Daniel Martinez Martinez","Id":"0053600000FnkftAAB"},"LastModifiedBy":{"Name":"Daniel Ocotitla","Id":"0052C0000026V4gQAE"},"TKD_rb_Takedown_CP__r":{"TD_fm_Party_Id__c":"29877","Eval_top_parentID__c":"00136000017ssiB","Eval_top_parentname__c":"EXTRUSIONES METALICAS, S.A. DE C.V.","Id":"a2Y3p00000MtjKGEAZ"}}]';
        Takedown_Table_AB_Controller_cls.sendEvalApprove(asset,createTakedownInvoice.Id);        
    }
}